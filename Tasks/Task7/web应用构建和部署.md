# Web应用构建
## 一、在页面上和用户ID的动态交互：
**使用了Mysql数据库
MyBatis集成和注解配置（注解配置贯穿在整个项目中）可以让SQL语句在项目文档中使用更方便，XML配置（可以通过设置路径进入对应用户的页面，点击用户的ID可以进入用户的页面，从而实现动态设计），创建VIEWObject模块方便传递任何数据到Velocity（JAVA引擎模板的一种，MVC架构的一种实现），创建DateTool实现Velocity自带工具类的导入。**

## 二、实现登陆注册浏览模块：
**使用了Mysql数据库**  
**注册模块：**  
1. 用户名合法性检测（长度，敏感词，重复，特殊字符）
2. 密码长度要求
3. 密码salt加密，密码强度检测（md5库，密码+salt共同使用md5进行加密，即使数据库中密码被泄露，也很难进行解密） 

**登陆/登出模块:**  
登陆：  
1. 服务器密码校验/三方校验回调，token登记  
1.1服务器端token关联userid  
1.2客户端存储token(app存储本地，浏览器存储cookie)  
2. 服务端/客户端token有效期设置（记住登陆）注:token可以是sessionid，或者是cookie里的一个key

登出：  
服务端/客户端token删除  
session清理  
**页面访问模块：**  
1. 客户端： 带token的HTTP请求（通过cookie带过来）
2. 服务端：  
2.1 根据token获取用户id  
2.2 根据用户id获取用户的具体信息（将信息存入在Spring上下文）  
2.3 用户和页面访问权限处理  
2.4 渲染页面/跳转页面（成功就进入页面/失败跳转“relogin”页面）

设置拦截器，页面浏览前要判断当前操作是否由未登录的用户进行，如果是游客则需跳入登陆注册界面后进行登陆方可进行操作。  

## 三、问题发布功能
**问题发布：没有登陆的用户进行问题发布的时候页面会重定向至登陆注册页面。同时对问题题目以及描述使用前缀树来进行敏感词过滤功能，使用htmlEscape进行HTML过滤功能**

## 四、评论中心功能
1. 使用统一的评论服务来覆盖所有的实体评论，在Mysql数据库中建立一个comment表进行对评论的操作：id，content，entity_id ->questionId/commentId，entity_type question/comment，created_date，user_id是表内的字段
2. 具有增加评论，查找所有评论，删除评论，显示评论数目功能，这个时候就需要新建通用的新模块开发流程（在代码中用Database Column、Model、DAO、Service、Controller和Test组成），当增加一条或者删除一条评论时评论数目会相应地发生变化，此时就需要使用数据库的事务功能
3. 站内信功能，做法和评论中心功能类似，因此把其放入评论功能内，需要在MySql中建立一个表，表中字段分别为id、from_id、to_id、content、created_date、has_read和conversation_id，通过sql语句的limit对站内信进行分页操作；通过设置list和detail路径对站内信实现查看列表以及仔细查看的功能；通过对sql语句的双层嵌套实现对站内信页面各私信的排序功能（消息越晚越放上面，同时只显示不同用户的最晚的那条发送的消息）；通过对has_read的值来对未读消息进行计算显示处理。

## 五、赞踩实现功能
**使用了Redis（主要是使用了Set的数据结构）  
不识别问题还是题目点赞，点赞之后返回点赞数，点赞数及点赞按钮呈高亮状态。实现点赞数显示功能。  
增添用户的事件逻辑实现查看自己对相应回答或者评论的点赞状态。  
RedisKey要使用特定的字符对Key进行分类**

# Web应用部署
**上述功能皆能在主机和云服务器上实现运行。实现条件宽松，不需要额外的资源部署。**